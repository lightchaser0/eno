<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36" version="26.1.0">
  <diagram name="Page-1" id="uhSqqSUA-CR1EVdYtRHn">
    <mxGraphModel dx="5799" dy="1277" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="nxpd1Gqb6fERObNxtbz0-108" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1110" y="880" width="790" height="430" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-117" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1050" y="1140" width="670" height="117.5" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-103" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1981" y="885" width="790" height="430" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-101" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-100" target="nxpd1Gqb6fERObNxtbz0-96">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-100" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1896" y="1135" width="580" height="120" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-1" value="strategy" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="187" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-2" value="strategy_id" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="367" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-3" value="strategy_desc" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="527" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-4" value="rule_models" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="697" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-5" value="create_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="867" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-6" value="update_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1027" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-7" value="strategy_rule" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="187" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-8" value="strategy_id" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="367" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-9" value="award_id" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="527" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-10" value="rule_type&lt;div&gt;(策略规则和奖品规则)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="697" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-11" value="rule_value" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1025" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-12" value="rule_desc" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1185" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-13" value="create_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1345" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-14" value="update_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1505" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-15" value="strategy_award" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="187" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-16" value="strategy_id" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="367" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-17" value="award_id" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="527" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-18" value="award_title" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="697" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-19" value="award_subtitle&lt;div&gt;(奖品规则信息)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="867" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-20" value="award_count" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1027" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-21" value="award_count_surplus" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1187" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-22" value="award_rate" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1347" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-23" value="rule_models" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1517" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-24" value="sort" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1677" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-25" value="create_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1837" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-26" value="update_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1997" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-27" value="rule_model" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="867" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-33" value="策略奖品：①每一个策略对应的奖品信息，包括奖品的库存，中奖概率，奖品的规则模型，抽奖页面转盘的顺序&lt;div&gt;②奖品的规则模型可以在startegy_rule,也可以在rule_tree里&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-183" y="340" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-34" value="策略规则&lt;div&gt;①抽奖中：&lt;/div&gt;&lt;div&gt;②抽奖前：rule_weight,rule_blacklist&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;具体信息&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-173" y="240" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-35" target="nxpd1Gqb6fERObNxtbz0-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-35" value="装配策略" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-2051" y="175" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-36" target="nxpd1Gqb6fERObNxtbz0-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-36" value="查询策略奖品表-&amp;gt;strategyAwardEntity&lt;div&gt;(不包括规则模型和时间)&lt;/div&gt;&lt;div&gt;缓存策略id对应的奖品信息(1个key)&lt;/div&gt;&lt;div&gt;缓存策略id对应的奖品的数量(n个key)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1851" y="175" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-38" target="nxpd1Gqb6fERObNxtbz0-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-38" value="装配全量抽奖" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1571" y="175" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-40" target="nxpd1Gqb6fERObNxtbz0-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-40" target="nxpd1Gqb6fERObNxtbz0-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-40" value="查询策略表&lt;div&gt;查看是否有权重策略，&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1391" y="175" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-42" value="查询策略规则表，&lt;div&gt;根据积分&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;装配&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;对应的权重&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1386" y="299" width="120" height="65" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-48" value="有" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1341" y="253" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-49" value="返回" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1211" y="177.5" width="120" height="65" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-51" value="没有" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1266" y="193" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-52" target="nxpd1Gqb6fERObNxtbz0-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-52" value="抽奖" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-2051" y="425" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-53" target="nxpd1Gqb6fERObNxtbz0-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-53" value="验证用户和&lt;div&gt;策略ID不为空&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1851" y="425" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-58" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-55" target="nxpd1Gqb6fERObNxtbz0-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-94" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-55" target="nxpd1Gqb6fERObNxtbz0-85">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-55" value="责任链&lt;div&gt;(抽奖前)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1661" y="425" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-56" value="规则树&lt;div&gt;(抽奖中)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1301" y="425" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-59" value="rule_tree" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="187" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-60" value="tree_id" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="367" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-61" value="tree_name" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="527" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-62" value="tree_desc" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="697" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-63" value="tree_node_rule_key&lt;div&gt;(root_key?入口)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="867" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-64" value="create_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1027" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-65" value="update_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1187" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-66" value="规则树：策略奖品里rule_model的值-&amp;gt;tree_id" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-203" y="440" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-67" value="rule_tree_node" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="187" y="540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-68" value="tree_id" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="367" y="540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-69" value="rule_key" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="527" y="540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-70" value="rule_desc" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="697" y="540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-71" value="rule_value" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="867" y="540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-72" value="create_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1027" y="540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-73" value="update_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1187" y="540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-74" value="规则树节点：rule_key 对应tree_node_rule_key&lt;div&gt;rule_value:该节点规则的值，比如lock的值，&lt;/div&gt;&lt;div&gt;比如luckward的奖品id&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-203" y="540" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-75" value="rule_tree_node_line" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="187" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-76" value="tree_id" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="367" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-77" value="rule_node_from" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="527" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-78" value="rule_node_to" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="697" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-79" value="rule_limit_type" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="867" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-80" value="rule_limit_value&lt;div&gt;(控制走向的感觉)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1027" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-81" value="create_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1187" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-82" value="update_time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1345" y="640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-83" value="规则链条&lt;div&gt;节点from和to&lt;/div&gt;&lt;div&gt;tree_id&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-203" y="640" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-84" value="策略的信息" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-183" y="140" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-90" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-85" target="nxpd1Gqb6fERObNxtbz0-88">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-85" value="rule_blacklist" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1661" y="535" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-91" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-86" target="nxpd1Gqb6fERObNxtbz0-89">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-86" value="rule_weight" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1661" y="615" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-93" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-87" target="nxpd1Gqb6fERObNxtbz0-92">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-87" value="default" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1661" y="695" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-88" value="1.查询黑名单(strategy_rule表里&lt;div&gt;指定strategyId和rule_model)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; 2.查看用户是否在黑名单，在则返回，不在则继续进行下一规则过滤&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1941" y="505" width="210" height="120" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-89" value="1.查询权重规则(strategy_rule表里&lt;div&gt;指定strategyId和rule_model)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; 2.查看用户积分，匹配对应的权重规则，然后从redis数据进行抽奖&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1491" y="585" width="210" height="120" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-92" value="1. 直接抽" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1656" y="805" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-95" value="ILogicChain" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1666" y="915" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-102" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-96" target="nxpd1Gqb6fERObNxtbz0-95">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-96" value="AbstractLogicChain" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1666" y="1025" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-97" value="RuleWeightLogicChian" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1496" y="1150" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-98" value="DefaultLogicChain" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1671" y="1155" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-99" value="BackListLogicChain" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1831" y="1155" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-106" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-104" target="nxpd1Gqb6fERObNxtbz0-105">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-104" value="DefaultChainFactory" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-1931" y="935" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-105" value="openLogicChain&lt;div&gt;(获得所有责任链节点，拼接责任链&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;)&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-1931" y="995" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-107" value="如果责任链执行的最后一个节点是默认节点&lt;div&gt;则需要进行下一规则：规则树&lt;/div&gt;&lt;div&gt;否则，直接返回抽奖结果&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1546" y="395" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-109" value="DefaultTreeFactory" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1070" y="930" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-110" value="openLogicTree&lt;div&gt;(返回决策引擎)&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1055" y="990" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-111" value="DefaultTreeFactory&lt;div&gt;（获取所有的规则树节点）&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-945" y="925" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-112" value="1.获取奖品规则&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;(strategy_award表里&lt;/span&gt;&lt;div&gt;奖品ruleModel对应的字段---tree_id)&lt;/div&gt;&lt;div&gt;2.构造规则树，IDecisionTreeEnginee&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1110" y="425" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-113" value="RuleLockLogicTreeNode&lt;div&gt;logic()函数&lt;/div&gt;" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1040" y="1150" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-114" value="RuleLuckAwardLogicTreeNode&lt;div&gt;logic()函数&lt;/div&gt;" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-820" y="1155" width="190" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-115" value="RuleStockLogicTreeNode&lt;div&gt;logic()函数&lt;/div&gt;" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-590" y="1160" width="170" height="75" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-116" value="ILogicTreeNode" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-785" y="1030" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-118" value="IDecisionTreeEngine" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-620" y="915" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-123" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="nxpd1Gqb6fERObNxtbz0-119" target="nxpd1Gqb6fERObNxtbz0-118">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-119" value="DecisionTreeEngine&lt;div&gt;process()函数-&amp;gt;while获取下一个规则树节点&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-685" y="970" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-124" value="rule_lock" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1005" y="1230" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-126" value="rule_luck_award" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-770" y="1230" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-127" value="rule_stock" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-545" y="1229.5" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-128" value="抽奖活动表" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="187" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-129" value="活动ID" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-130" value="名称" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-131" value="描述" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="697" y="755" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-132" value="开始时间&lt;span style=&quot;color: rgba(0, 0, 0, 0); font-family: monospace; font-size: 0px; text-align: start; text-wrap-mode: nowrap;&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%E6%8F%8F%E8%BF%B0%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%22697%22%20y%3D%22755%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="867" y="755" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-133" value="结束时间" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1027" y="755" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-134" value="库存总量" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1187" y="755" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-135" value="库存剩余" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1347" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-136" value="参与配置&lt;span style=&quot;color: rgba(0, 0, 0, 0); font-family: monospace; font-size: 0px; text-align: start; text-wrap-mode: nowrap;&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%E5%BA%93%E5%AD%98%E5%89%A9%E4%BD%99%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%221347%22%20y%3D%22760%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1505" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-137" value="抽奖策略" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1670" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-138" value="状态&lt;span style=&quot;color: rgba(0, 0, 0, 0); font-family: monospace; font-size: 0px; text-align: start; text-wrap-mode: nowrap;&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%E6%8A%BD%E5%A5%96%E7%AD%96%E7%95%A5%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%221670%22%20y%3D%22760%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1830" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-139" value="创建时间" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1997" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nxpd1Gqb6fERObNxtbz0-140" value="更新时间" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2160" y="760" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
